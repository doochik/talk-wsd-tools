<!DOCTYPE HTML>
<html lang="ru">
<head>
	<title>Роботы для людей: боевой арсенал фронтендера</title>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=1274, user-scalable=no">
    <link rel="stylesheet" href="themes/yandex/styles/screen.css">
    <link rel="stylesheet" href="themes/yandex/styles/print.css" media="print">

    <style>

        .slide .min code
        {
            line-height: 40px;
        }

        .slide p.pre
        {
            margin-bottom: 10px;
        }

        .ico.mail
        {
            background: url("pictures/favicon-ie9.ico") no-repeat;
            background-size: 18px 18px;
        }

        .slide ul.bullet-minus > li::before
        {
            content: '− ';
        }

        .slide ul.bullet-plus > li::before
        {
            content: '+ ';
        }

        .results
        {
            border-collapse: collapse;
        }
        .results td,
        .results th
        {
            border: 1px solid #000;
            padding: 0 1em;
        }

        .results .good
        {
            color: #00a86b;
        }

        .results .avg
        {
            color: #cfb53b;
        }

        .results .bad
        {
            color: #de3163;
        }
    </style>
</head>
<body class="list">
	<header class="caption">
		<h1>Роботы для людей: боевой арсенал фронтендера</h1>
        <p>Алексей Андросов</p>
        <p>Старший разработчик интерфейсов</p>
        <p>Я.Субботник, Киев, 27 апреля 2013 года</p>
	</header>
	<div class="slide first" id="Cover">
        <h2 style="left: 50px; width: 815px; font-size: 60px">Роботы для людей: боевой арсенал фронтендера</h2>
        <div class="info" style="width: 500px; left: 50px; font-size: 70%; bottom: 20px">
            <p>Алексей Андросов</p>
            <p>Старший разработчик интерфейсов</p>
            <p>WSD, Санкт-Петербург, 8 июня 2013 года</p>
        </div>
	</div>
	<div class="slide" id="page00">
        <h2>Обо мне</h2>
        <img src="pictures/photo_160x160.jpg" style="float: right; padding: 0 0 40px 40px"/>
        <p>
            <img src="pictures/favicon-ie9.ico" style="width: 25px; height: 25px; margin-bottom: -7px"/>
            <a href="mailto:aandrosov@yandex-team.ru" style="margin-right: 20px">aandrosov@yandex-team.ru</a>
            <img src="pictures/twitter-bird-blue-on-white.png" style="width: 40px; height: 40px; margin: 0 0 -15px -10px"/>
            <a style="margin-left: -8px" href="https://twitter.com/doochik">@doochik</a>
        </p>
        <ul>
            <li>По образованию – специалист по защите информации</li>
            <li>6 лет в Яндексе, 2 года ведущий разработчик фронтенда в Я.Почте</li>
            <li>Люблю копаться в браузерах и внедрять новые фичи из HTML5</li>
            <li>Можете спрашивать про JS, CSS и frontend в целом</li>
        </ul>
	</div>
    <div class="slide shout ribbon" id="borschik-title">
        <h2>Borschik</h2>
    </div>
    <div class="slide">
        <h2>Borschik (<a href="http://bit.ly/borschik">bit.ly/borschik</a>)</h2>
        <p></p>
        <ul>
            <li>Это <mark>текстовый процессор</mark> для файлов на node.js</li>
            <li>Умеет <mark>склеивать</mark> файлы</li>
            <li>Умеет <mark>преобразовывать</mark> файлы</li>
            <li>Умеет <mark>минимизировать</mark> файлы</li>
            <li>Поддерживает «из коробки» <mark>CSS</mark> и <mark>JS</mark></li>
            <li>Можно <mark>расширять</mark> своими «технологиями»</li>
        </ul>
    </div>
    <div class="slide">
        <h2>Внутри два понятия</h2>
        <p></p>
        <ul>
            <li><mark>include</mark> – вы указываете ссылку на файл, после сборки ссылка заменяется на содержимое файла</li>
            <li><mark>link</mark> – вы указываете ссылку на файл, после сборки ссылка преобразовывается</li>
        </ul>
    </div>
    <div class="slide">
        <h2>Склейка CSS</h2>
        <p class="pre">page.css</p>
        <pre>
            <code>@import url("b-header/b-header.css");</code>
            <code>@import url("b-footer/b-footer.css");</code>
        </pre>
        <p class="pre">Запускаем</p>
        <pre class="min">
            <code>$ borschik --input=page.css</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка CSS</h2>
        <p class="pre">Получаем</p>
        <pre class="min">
            <code>/* b-header/b-header.css begin */</code>
            <code>  ...b-header/b-header.css content ...</code>
            <code>/* b-header/b-header.css end */</code>
            <code> </code>
            <code>/* b-footer/b-footer.css begin */</code>
            <code>  ...b-footer/b-footer.css content ...</code>
            <code>/* b-footer/b-footer.css end */</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка CSS</h2>
        <p>Правильное раскрытие путей</p>
        <p class="pre">b-footer/b-footer.css</p>
        <pre class="min">
            <code>.b-footer</code>
            <code>{</code>
            <code>    border-top: 1px solid #000;</code>
            <code>    background: url("<mark>bg.png</mark>");</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка CSS</h2>
        <p>Правильное раскрытие путей</p>
        <p class="pre">В page.css получим</p>
        <pre class="min">
            <code>.b-footer</code>
            <code>{</code>
            <code>    border-top: 1px solid #000;</code>
            <code>    background: url("<mark>b-footer/bg.png</mark>");</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка JS (вариант 1)</h2>
        <p><mark>borschik:include</mark> в /**/ раскрываются без преобразований</p>
        <p class="pre">page.js</p>
        <pre>
            <code>/* <mark>borschik:include</mark>:b-header/b-header.js */</code>
            <code>/* <mark>borschik:include</mark>:b-footer/b-footer.js */</code>
        </pre>
        <p class="pre">Запускаем</p>
        <pre class="min">
            <code>$ borschik --input=page.js</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка JS (вариант 1)</h2>
        <p class="pre">Получаем</p>
        <pre class="min">
            <code>/* b-header/b-header.js begin */</code>
            <code>  ...b-header/b-header.js content ...</code>
            <code>/* b-header/b-header.js end */</code>
            <code> </code>
            <code>/* b-footer/b-footer.js begin */</code>
            <code>  ...b-footer/b-footer.js content ...</code>
            <code>/* b-footer/b-footer.js end */</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка JS (вариант 2)</h2>
        <p><mark>borschik:include</mark> в "" раскрываются через JSON.stringify</p>
        <p class="pre">page.js</p>
        <pre>
            <code>var prj = {};</code>
            <code>prj.STATIC_HOST = "<mark>borschik:include</mark>:configs/host.txt";</code>
        </pre>
        <p class="pre">Запускаем</p>
        <pre class="min">
            <code>$ borschik --input=page.js</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Склейка JS (вариант 2)</h2>
        <p class="pre">Получаем</p>
        <pre>
            <code>var prj = {};</code>
            <code>prj.STATIC_HOST = "yandex.st";</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Минимизация</h2>
        <ul>
            <li>CSS – через CSSO</li>
            <li>JS – через UglifyJS</li>
            <li>У каждой технологии можно переопределить метод minimize</li>
        </ul>
    </div>
    <div class="slide">
        <h2>Относительные ссылки на ресурсы</h2>
        <ul>
            <li>Можно изменить ссылки с относительных на абсолютные или другие относительные</li>
            <li>Управляется с помощью конфигов в файле .borschik</li>
            <li>Конфигов может быть много (в разных директориях)</li>
        </ul>
    </div>
    <div class="slide">
        <h2>Конфиг .borschik</h2>
        <pre>
            <code>{</code>
            <code>    "paths" : {</code>
            <code>        "./": "/",</code>
            <code>        "css/": "//yandex.st/my-prj/css/"</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Попробуем!</h2>
        <p class="pre">css/style.css</p>
        <pre>
            <code>.bg1 {</code>
            <code>    background: url("../imgs/bg1.png")</code>
            <code>}</code>
            <code>.bg2 {</code>
            <code>    background: url("bg2.png")</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>После сборки получим</h2>
        <pre>
            <code>.bg1 {</code>
            <code>    background: url("/imgs/bg1.png")</code>
            <code>}</code>
            <code>.bg2 {</code>
            <code>    background: url("//yandex.st/my-prj/css/bg2.png")</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Заморозка файлов</h2>
        <p>Загрузка ресурсов (например, картинок) по урлу, зависящему от содержимого файла (хеш-суммы).</p>
        <p>Все ссылки на ресурсы заменяются на хеш от контента файла и создается файл с таким именем.</p>
    </div>
    <div class="slide">
        <h2>Заморозка файлов: конфиг</h2>
        <pre class="min">
            <code>{</code>
            <code>    "paths" : {</code>
            <code>        "_": "//yandex.st/prj/_"</code>
            <code>    },</code>
            <code>    "freeze_paths" : {</code>
            <code>        "i/bg": "../../_",</code>
            <code>        "i/ico": "../../_"</code>
            <code>    }</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Попробуем</h2>
        <p class="pre">css/style.css</p>
        <pre>
            <code>.style {</code>
            <code>    background: url("../i/bg/hot.png");</code>
            <code>}</code>
        </pre>
        <p class="pre">Запускаем</p>
        <pre>
            <code>$ borschik --input=css/style.css --freeze=yes</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Получаем</h2>
        <pre>
            <code>.style {</code>
            <code>  background: url("//yandex.st/prj/_/jUK5O9GsR0hf0.png");</code>
            <code>}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Заморозка файлов</h2>
        <p>Можно фризить:</p>
        <ul>
            <li>не только картинки, а шрифты, флешки и т.п.</li>
            <li>картинки в JS(!)</li>
            <li>картинки с динамическими урлами в JS(!!!)</li>
            <li>сами JS- и CSS-файлы</li>
        </ul>
    </div>
    <div class="slide shout">
        <h2>И это еще не всё!</h2>
    </div>
    <div class="slide">
        <h2>Borschik</h2>
        <p>GitHub: <a href="https://github.com/bem/borschik">github.com/bem/borschik</a>. Пиши ишью @ Пулреквесть!</p>
        <p>Подробная статья: <a href="http://ru.bem.info/articles/borschik/">ru.bem.info/articles/borschik/</a></p>
        <p>Все про заморозку в моем докладе на Я.Субботнике <a href="http://events.yandex.ru/events/yasubbotnik/kiev-apr-2013/talks/837/">events.yandex.ru/events/yasubbotnik/kiev-apr-2013/talks/837/</a></p>
    </div>
    <div class="slide shout ribbon" id="csso-title">
        <h2>CSSO</h2>
    </div>
    <div class="slide shout" id="csso-1">
        <h2>CSS Optimizer</h2>
    </div>
    <div class="slide shout" id="csso-2">
        <h2>Да, еще один минимизатор CSS =)</h2>
    </div>
    <div class="slide">
        <h2>Все вроде бы как обычно...</h2>
        <ul>
            <li>Вырезает комментарии и пробелы</li>
            <li>Удаляет пустые декларации</li>
            <li>Укорачивает записи (цвет, размер)</li>
            <li>???</li>
            <li>Строит AST дерево</li>
        </ul>
    </div>
    <div class="slide">
        <h2>Зачем AST?</h2>
        <p>AST дает полное понимание всех деклараций и селекторов.</p>
        <p>А значит можно менять структуру самих CSS-деклараций!</p>
    </div>
    <div class="slide shout">
        <h2>Лучше один раз увидеть чем сто раз услышать</h2>
    </div>
    <div class="slide">
        <h2>Объединение селекторов</h2>
        <pre>
            <code>.test0 {color: red}</code>
            <code>.test1 {color: blue}</code>
            <code>.test1 {margin: 0}</code>
        </pre>
        <p class="pre">&darr;</p>
        <pre>
            <code>.test0 {color: red}</code>
            <code>.test1 {color: blue; margin: 0}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Слияние селекторов</h2>
        <pre>
            <code>.test0 {color: red}</code>
            <code>.test1 {color: blue}</code>
            <code>.test2 {color: blue}</code>
        </pre>
        <p class="pre">&darr;</p>
        <pre>
            <code>.test0 {color: red}</code>
            <code>.test1, test2 {color: blue;}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Разделение селекторов</h2>
        <pre>
            <code>.test0 {color: red; border: none; margin: 0}</code>
            <code>.test1 {color: blue; border: none; margin: 0}</code>
        </pre>
        <p class="pre">&darr;</p>
        <pre>
            <code>.test0 {color: red}</code>
            <code>.test1 {color: blue}</code>
            <code>.test0, test1 {border: none; margin: 0}</code>
        </pre>
    </div>
    <div class="slide">
        <h2>Удаление перекрываемых свойств</h2>
        <pre>
            <code>.test {color: red; margin: 0; color: green}</code>
        </pre>
        <p class="pre">&darr;</p>
        <pre>
            <code>.test {margin: 0; color: red}</code>
        </pre>
    </div>
    <div class="slide" id="csso-test">
        <h2>В цифрах</h2>
        <p>В тесте использовались</p>
        <ul>
            <li>Microsoft Ajax Minifier 4.93</li>
            <li>CSSO 1.3.7</li>
            <li>CSSmin (YUICompressor) 0.4.1</li>
            <li>CSScomb 2.12 (<a href="http://csscomb.ru">csscomb.ru</a>) – форматтер CSS-свойств</li>
        </ul>
    </div>
    <div class="slide" id="csso-test-bootstrap">
        <h2>В цифрах. bootstrap 2.3.2</h2>
        <table class="results">
            <thead>
                <tr>
                    <th></th>
                    <th>Ajax Minifier</th>
                    <th>CSSO</th>
                    <th>CSSO + CSScomb</th>
                    <th>CSSmin</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>source</td>
                    <td style="text-align: center" colspan="4">127352</td>
                </tr>
                <tr>
                    <td>source.gz</td>
                    <td style="text-align: center" colspan="4">18384</td>
                </tr>
                <tr>
                    <td>min</td>
                    <td>105710</td>
                    <td class="good">105644</td>
                    <td>105644</td>
                    <td>106035</td>
                </tr>
                <tr>
                    <td>min.gz</td>
                    <td>17103</td>
                    <td class="good">17085</td>
                    <td>17097</td>
                    <td>17101</td>
                </tr>
                <tr>
                    <td>min.9.gz</td>
                    <td>16943</td>
                    <td class="good">16922</td>
                    <td>16924</td>
                    <td>16941</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="slide" id="csso-test-jquery-ui">
        <h2>В цифрах. jQuery UI 1.10.3</h2>
        <table class="results">
            <thead>
                <tr>
                    <th></th>
                    <th>Ajax Minifier</th>
                    <th>CSSO</th>
                    <th>CSSO + CSScomb</th>
                    <th>CSSmin</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>source</td>
                    <td style="text-align: center" colspan="4">32456</td>
                </tr>
                <tr>
                    <td>source.gz</td>
                    <td style="text-align: center" colspan="4">6101</td>
                </tr>
                <tr>
                    <td>min</td>
                    <td>25669</td>
                    <td>25250</td>
                    <td class="good">24756</td>
                    <td>25645</td>
                </tr>
                <tr>
                    <td>min.gz</td>
                    <td>4918</td>
                    <td>4885</td>
                    <td class="good">4659</td>
                    <td>4899</td>
                </tr>
                <tr>
                    <td>min.9.gz</td>
                    <td>4861</td>
                    <td>4833</td>
                    <td class="good">4603</td>
                    <td>4844</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="slide" id="csso-test-jquery-mobile">
        <h2>В цифрах. jQuery Mobile 1.3.0</h2>
        <table class="results">
            <thead>
                <tr>
                    <th></th>
                    <th>Ajax Minifier</th>
                    <th>CSSO</th>
                    <th>CSSO + CSScomb</th>
                    <th>CSSmin</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>source</td>
                    <td style="text-align: center" colspan="4">136008</td>
                </tr>
                <tr>
                    <td>source.gz</td>
                    <td style="text-align: center" colspan="4">19410</td>
                </tr>
                <tr>
                    <td>min</td>
                    <td>94010</td>
                    <td class="good">92884</td>
                    <td>92884</td>
                    <td>93995</td>
                </tr>
                <tr>
                    <td>min.gz</td>
                    <td>13209</td>
                    <td class="good">13128</td>
                    <td>13136</td>
                    <td>13206</td>
                </tr>
                <tr>
                    <td>min.9.gz</td>
                    <td>13051</td>
                    <td class="good">12969</td>
                    <td>12977</td>
                    <td>13045</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="slide" id="csso-test-mail">
        <h2>В цифрах. Синяя тема Я.Почты</h2>
        <table class="results">
            <thead>
                <tr>
                    <th></th>
                    <th>Ajax Minifier</th>
                    <th>CSSO</th>
                    <th>CSSO + CSScomb</th>
                    <th>CSSmin</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>source</td>
                    <td style="text-align: center" colspan="4">371466</td>
                </tr>
                <tr>
                    <td>source.gz</td>
                    <td style="text-align: center" colspan="4">53235</td>
                </tr>
                <tr>
                    <td>min</td>
                    <td>250373</td>
                    <td class="good">247153</td>
                    <td></td>
                    <td>249066</td>
                </tr>
                <tr>
                    <td>min.gz</td>
                    <td>41212</td>
                    <td>41064</td>
                    <td></td>
                    <td class="good">40987</td>
                </tr>
                <tr>
                    <td>min.9.gz</td>
                    <td>40756</td>
                    <td>40617</td>
                    <td></td>
                    <td class="good">40533</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="slide">
        <h2>CSSO</h2>
        <p>Github <a href="https://github.com/css/csso">github.com/css/csso</a></p>
        <p>Подробная статья с примерами <a href="http://ru.bem.info/tools/csso/">ru.bem.info/tools/csso/</a></p>
    </div>
    <div class="slide shout ribbon" id="svgo-title">
        <h2>SVGO</h2>
    </div>
    <div class="slide shout">
        <h2>SVG Optimizer</h2>
    </div>
    <div class="slide">
        <h2>Зачем</h2>
        <p>Размер, парсинг, рендеринг</p>
    </div>
    <div class="slide">
        <h2>Зачем</h2>
        <p>Тоже AST</p>
        <p>Что он весь плагинный и каждая минимизация - плагин</p>
    </div>
    <div class="slide">
        <h2>Пример</h2>
        <p>Стандартный пример из презентации Кира</p>
    </div>
    <div class="slide first" id="CoverEnd">
        <div class="info" style="width: 500px; left: 50px; font-size: 100%; top: 200px">
            <p>Алексей Андросов</p>
            <p>Старший разработчик интерфейсов</p>
            <p>
                <img src="pictures/favicon-ie9.ico" style="width: 25px; height: 25px; margin-bottom: -7px"/>
                <a href="mailto:doochik@ya.ru" style="margin-right: 20px">doochik@ya.ru</a>
            </p>
            <p>
                <img src="pictures/twitter-bird-blue-on-white.png" style="width: 40px; height: 40px; margin: 0 0 -15px -10px"/>
                <a style="margin-left: -8px" href="https://twitter.com/doochik">@doochik</a>
            </p>
            <p>
                <img src="pictures/github.svg" style="width: 40px; height: 40px; margin: 0 0 -15px -10px"/>
                <a style="margin-left: -8px" href="https://github.com/doochik">github.com/doochik</a>
            </p>
        </div>
    </div>
	<div class="progress"><div></div></div>
	<script src="scripts/script.js"></script>
</body>
</html>
